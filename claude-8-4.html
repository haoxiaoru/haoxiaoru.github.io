<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>和弦的世界：定义、分类与应用</title>
    <script src="https://cdn.jsdelivr.net/npm/echarts@5.4.3/dist/echarts.min.js"></script>
    <style>
        :root {
            --primary: #4F46E5;
            --primary-light: #818CF8;
            --accent: #F59E0B;
            --text: #1F2937;
            --text-light: #6B7280;
            --background: #F8FAFC;
            --card: #FFFFFF;
            --border: #E2E8F0;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        html {
            scroll-behavior: smooth;
            scroll-padding-top: 2rem;
        }
        
        body {
            font-family: "Noto Sans SC", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            line-height: 1.6;
            color: var(--text);
            background-color: var(--background);
            padding: 0;
            max-width: 100%;
            overflow-x: hidden;
        }
        
        h1, h2, h3, h4, h5, h6 {
            color: var(--text);
            margin-top: 1.5rem;
            margin-bottom: 1rem;
            line-height: 1.2;
        }
        
        h1 {
            font-size: 2.25rem;
            font-weight: 800;
            margin-top: 0;
            background: linear-gradient(120deg, var(--primary), var(--accent));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }
        
        h2 {
            font-size: 1.75rem;
            font-weight: 700;
            padding-bottom: 0.5rem;
            border-bottom: 2px solid var(--border);
        }
        
        h3 {
            font-size: 1.5rem;
            font-weight: 600;
        }
        
        p, ul, ol {
            margin-bottom: 1.25rem;
        }
        
        a {
            color: var(--primary);
            text-decoration: none;
            transition: color 0.2s ease;
        }
        
        a:hover {
            color: var(--primary-light);
            text-decoration: underline;
        }
        
        img {
            max-width: 100%;
            height: auto;
            border-radius: 8px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        
        .container {
            display: flex;
            max-width: 1280px;
            margin: 0 auto;
            padding: 1rem;
        }
        
        .sidebar {
            position: sticky;
            top: 2rem;
            width: 250px;
            padding-right: 1.5rem;
            height: calc(100vh - 4rem);
            overflow-y: auto;
            flex-shrink: 0;
            scrollbar-width: thin;
            display: block;
        }
        
        .main-content {
            flex: 1;
            max-width: calc(100% - 250px);
        }
        
        .toc {
            background-color: var(--card);
            padding: 1.25rem;
            border-radius: 8px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
            border: 1px solid var(--border);
        }
        
        .toc h3 {
            margin-top: 0;
            font-size: 1.25rem;
            margin-bottom: 1rem;
        }
        
        .toc ul {
            list-style-type: none;
            padding-left: 0;
        }
        
        .toc li {
            margin-bottom: 0.75rem;
        }
        
        .toc ul ul {
            padding-left: 1.25rem;
            margin-top: 0.5rem;
            margin-bottom: 0.5rem;
            border-left: 2px solid var(--border);
        }
        
        .toc a {
            display: block;
            padding: 0.25rem 0;
            color: var(--text-light);
            transition: all 0.2s ease;
            font-size: 0.95rem;
        }
        
        .toc a:hover, .toc a.active {
            color: var(--primary);
            transform: translateX(3px);
        }
        
        .card {
            background-color: var(--card);
            border-radius: 12px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
            padding: 1.5rem;
            margin-bottom: 2rem;
            border: 1px solid var(--border);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        
        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 15px rgba(0, 0, 0, 0.1);
        }
        
        .section {
            margin-bottom: 3rem;
        }
        
        .note {
            background-color: rgba(79, 70, 229, 0.1);
            border-left: 4px solid var(--primary);
            padding: 1rem;
            margin: 1.5rem 0;
            border-radius: 0 8px 8px 0;
        }
        
        .piano-container {
            position: relative;
            height: 220px;
            margin: 2rem 0;
            user-select: none;
        }
        
        .piano {
            display: flex;
            height: 100%;
            justify-content: center;
        }
        
        .white-key {
            width: 40px;
            height: 200px;
            background: white;
            border: 1px solid #ccc;
            border-radius: 0 0 4px 4px;
            position: relative;
            z-index: 1;
            cursor: pointer;
            transition: background-color 0.2s ease;
        }
        
        .black-key {
            position: absolute;
            width: 24px;
            height: 120px;
            background: #333;
            border-radius: 0 0 4px 4px;
            z-index: 2;
            cursor: pointer;
            transition: background-color 0.2s ease;
        }
        
        .white-key.active, .white-key:active {
            background-color: #e0e7ff;
        }
        
        .black-key.active, .black-key:active {
            background-color: #4F46E5;
        }
        
        .white-key .note-name {
            position: absolute;
            bottom: 10px;
            left: 0;
            right: 0;
            text-align: center;
            font-weight: bold;
            color: #666;
        }
        
        .black-key .note-name {
            position: absolute;
            bottom: 10px;
            left: 0;
            right: 0;
            text-align: center;
            font-weight: bold;
            color: white;
            font-size: 0.8rem;
        }
        
        .chart-container {
            width: 100%;
            height: 400px;
            margin: 2rem 0;
        }
        
        .chord-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 1.25rem;
            margin: 2rem 0;
        }
        
        .chord-card {
            padding: 1.5rem;
            border-radius: 8px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
            background: var(--card);
            border: 1px solid var(--border);
            transition: transform 0.2s ease, box-shadow 0.2s ease;
        }
        
        .chord-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 15px rgba(0, 0, 0, 0.1);
        }
        
        .chord-title {
            font-size: 1.25rem;
            font-weight: 600;
            margin-bottom: 0.75rem;
            color: var(--primary);
        }
        
        .chord-description {
            color: var(--text-light);
            font-size: 0.95rem;
            margin-bottom: 1rem;
        }
        
        .quiz-container {
            background: linear-gradient(135deg, #f0f4ff, #e6f0ff);
            padding: 1.5rem;
            border-radius: 12px;
            margin: 2rem 0;
            border: 1px solid #d1ddff;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
        }
        
        .quiz-title {
            font-size: 1.25rem;
            font-weight: 600;
            margin-bottom: 1rem;
            color: var(--primary);
        }
        
        .quiz-question {
            font-size: 1.1rem;
            margin-bottom: 1.5rem;
        }
        
        .quiz-options {
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
        }
        
        .quiz-option {
            background-color: white;
            border: 1px solid var(--border);
            padding: 0.75rem 1rem;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
        }
        
        .quiz-option:hover {
            border-color: var(--primary-light);
            background-color: rgba(79, 70, 229, 0.05);
        }
        
        .quiz-option.selected {
            border-color: var(--primary);
            background-color: rgba(79, 70, 229, 0.1);
        }
        
        .quiz-option.correct {
            border-color: #10B981;
            background-color: rgba(16, 185, 129, 0.1);
        }
        
        .quiz-option.incorrect {
            border-color: #EF4444;
            background-color: rgba(239, 68, 68, 0.1);
        }
        
        .quiz-feedback {
            margin-top: 1.5rem;
            padding: 1rem;
            border-radius: 6px;
            display: none;
        }
        
        .quiz-feedback.correct {
            background-color: rgba(16, 185, 129, 0.1);
            border: 1px solid #10B981;
            color: #065F46;
        }
        
        .quiz-feedback.incorrect {
            background-color: rgba(239, 68, 68, 0.1);
            border: 1px solid #EF4444;
            color: #B91C1C;
        }
        
        .quiz-check-btn {
            margin-top: 1.5rem;
            background-color: var(--primary);
            color: white;
            border: none;
            padding: 0.75rem 1.5rem;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 600;
            transition: background-color 0.2s;
        }
        
        .quiz-check-btn:hover {
            background-color: var(--primary-light);
        }

        .chord-table {
            width: 100%;
            margin: 1.5rem 0;
            border-collapse: collapse;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
            background: white;
            border-radius: 8px;
            overflow: hidden;
        }
        
        .chord-table thead {
            background-color: var(--primary);
            color: white;
        }
        
        .chord-table th, .chord-table td {
            padding: 0.75rem 1rem;
            text-align: left;
            border-bottom: 1px solid var(--border);
        }
        
        .chord-table tbody tr:hover {
            background-color: rgba(79, 70, 229, 0.05);
        }
        
        @media (max-width: 768px) {
            .sidebar {
                display: none;
            }
            
            .main-content {
                max-width: 100%;
            }
            
            .container {
                flex-direction: column;
                padding: 1rem;
            }
            
            h1 {
                font-size: 1.75rem;
            }
            
            h2 {
                font-size: 1.5rem;
            }
            
            h3 {
                font-size: 1.25rem;
            }
            
            .chord-grid {
                grid-template-columns: 1fr;
            }
            
            .white-key {
                width: 32px;
            }
            
            .black-key {
                width: 18px;
            }
            
            .note-name {
                font-size: 0.7rem;
            }
        }
        
        .confetti {
            position: absolute;
            z-index: 10000;
            pointer-events: none;
        }
    </style>
</head>
<body>
    <div class="container">
        <aside class="sidebar">
            <div class="toc">
                <h3>目录</h3>
                <ul>
                    <li><a href="#introduction">和弦的定义</a></li>
                    <li><a href="#theory">和弦的基本理论</a>
                        <ul>
                            <li><a href="#intervals">音程与三度叠置</a></li>
                            <li><a href="#chord-components">和弦的组成音</a></li>
                        </ul>
                    </li>
                    <li><a href="#types">和弦的主要类型</a>
                        <ul>
                            <li><a href="#triads">三和弦</a></li>
                            <li><a href="#seventh">七和弦</a></li>
                            <li><a href="#extended">扩展和弦</a></li>
                            <li><a href="#altered">变化和弦</a></li>
                        </ul>
                    </li>
                    <li><a href="#system">和弦标记系统</a></li>
                    <li><a href="#progression">和弦进行</a></li>
                    <li><a href="#applications">和弦的应用场景</a></li>
                    <li><a href="#quiz">和弦知识小测验</a></li>
                    <li><a href="#interactive">互动和弦键盘</a></li>
                </ul>
            </div>
        </aside>
        <main class="main-content">
            <div class="card">
                <h1>和弦的世界：定义、分类与应用</h1>
                <p>和弦是音乐理论中的基础概念，也是作曲、编曲和即兴演奏的核心要素。从古典音乐到现代流行音乐，和弦的使用贯穿音乐创作的各个方面。本文将带您全面了解和弦的概念、类型及其在音乐中的应用。</p>
            </div>
            
            <section id="introduction" class="section">
                <h2>和弦的定义</h2>
                <div class="card">
                    <p>和弦（Chord）是指三个或更多不同音高的音符同时发声或在功能上被视为一个整体的音集合。它是西方调性音乐的基础，是构建音乐和声的基本单位。</p>
                    <div class="note">
                        <p><strong>专业定义：</strong>从音乐理论角度看，和弦是由多个按照特定音程关系（通常是三度叠置）排列的音组成的整体音响结构。</p>
                    </div>
                    <p>简单来说，当我们同时按下钢琴上的几个键（至少三个），或者在吉他上同时拨动几根弦，产生的和声就是和弦。不过，并非任意几个音的组合都能形成有意义的和弦，有效的和弦通常遵循特定的结构规则。</p>
                </div>
            </section>
            
            <section id="theory" class="section">
                <h2>和弦的基本理论</h2>
                
                <section id="intervals" class="section">
                    <h3>音程与三度叠置</h3>
                    <div class="card">
                        <p>和弦的构成基于音程理论，其中最基础的是<strong>三度叠置原则</strong>。</p>
                        <ul>
                            <li><strong>音程</strong>：两个音之间的距离关系，如大二度、小三度、纯四度等</li>
                            <li><strong>三度叠置</strong>：传统和声学中构建和弦的主要方式，即将音按照三度音程（大三度或小三度）依次叠加</li>
                        </ul>
                        <p>例如，C大三和弦由C（根音）、E（大三度）和G（纯五度）组成，这三个音之间形成了三度叠置结构：C到E是大三度，E到G是小三度。</p>
                        
                        <div class="chart-container" id="intervals-chart"></div>
                    </div>
                </section>
                
                <section id="chord-components" class="section">
                    <h3>和弦的组成音</h3>
                    <div class="card">
                        <p>一个完整的和弦通常包含以下组成部分：</p>
                        <ul>
                            <li><strong>根音（Root）</strong>：和弦的基础音，和弦通常以它命名</li>
                            <li><strong>三音（Third）</strong>：距离根音三度的音，决定了和弦的主要性质（大三度为大和弦，小三度为小和弦）</li>
                            <li><strong>五音（Fifth）</strong>：距离根音五度的音，通常为纯五度、增五度或减五度</li>
                            <li><strong>七音（Seventh）</strong>：距离根音七度的音，出现在七和弦中</li>
                            <li><strong>扩展音（Extensions）</strong>：包括九音、十一音和十三音等，用于扩展和弦的色彩</li>
                        </ul>
                    </div>
                </section>
            </section>
            
            <section id="types" class="section">
                <h2>和弦的主要类型</h2>
                <div class="card">
                    <p>和弦的种类极其丰富，从最基础的三和弦到复杂的转位和弦、扩展和弦，共有数百种不同的组合。根据结构和数量，我们可以将和弦分为以下几类：</p>
                </div>
                
                <section id="triads" class="section">
                    <h3>三和弦（Triads）</h3>
                    <div class="card">
                        <p>三和弦是最基本的和弦类型，由三个音构成，包括根音、三音和五音。根据三音和五音的不同组合，三和弦可分为四种基本类型：</p>
                        
                        <div class="chord-grid">
                            <div class="chord-card">
                                <div class="chord-title">大三和弦（Major Triad）</div>
                                <div class="chord-description">由根音、大三度和纯五度组成。具有明亮、稳定的音色。</div>
                                <div class="chord-example">例：C大三和弦 = C + E + G</div>
                            </div>
                            <div class="chord-card">
                                <div class="chord-title">小三和弦（Minor Triad）</div>
                                <div class="chord-description">由根音、小三度和纯五度组成。通常给人忧郁、深沉的感觉。</div>
                                <div class="chord-example">例：C小三和弦 = C + E♭ + G</div>
                            </div>
                            <div class="chord-card">
                                <div class="chord-title">减三和弦（Diminished Triad）</div>
                                <div class="chord-description">由根音、小三度和减五度组成。具有紧张、不稳定的特性。</div>
                                <div class="chord-example">例：C减三和弦 = C + E♭ + G♭</div>
                            </div>
                            <div class="chord-card">
                                <div class="chord-title">增三和弦（Augmented Triad）</div>
                                <div class="chord-description">由根音、大三度和增五度组成。具有悬而未决的特性。</div>
                                <div class="chord-example">例：C增三和弦 = C + E + G♯</div>
                            </div>
                        </div>
                    </div>
                </section>
                
                <section id="seventh" class="section">
                    <h3>七和弦（Seventh Chords）</h3>
                    <div class="card">
                        <p>七和弦在三和弦的基础上增加了七音，共有四个音。七音的引入增强了和弦的不稳定性和前进推动力，使和弦的色彩更为丰富。常见的七和弦有：</p>
                        
                        <div class="chord-table">
                            <thead>
                                <tr>
                                    <th>七和弦类型</th>
                                    <th>组成音（以C为根音）</th>
                                    <th>标记方式</th>
                                    <th>特点</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>大七和弦</td>
                                    <td>C + E + G + B</td>
                                    <td>Cmaj7, CM7</td>
                                    <td>明亮、温暖</td>
                                </tr>
                                <tr>
                                    <td>属七和弦</td>
                                    <td>C + E + G + B♭</td>
                                    <td>C7</td>
                                    <td>不稳定、推动力强</td>
                                </tr>
                                <tr>
                                    <td>小七和弦</td>
                                    <td>C + E♭ + G + B♭</td>
                                    <td>Cm7, Cmin7</td>
                                    <td>柔和、爵士感</td>
                                </tr>
                                <tr>
                                    <td>半减七和弦</td>
                                    <td>C + E♭ + G♭ + B♭</td>
                                    <td>Cø, Cm7♭5</td>
                                    <td>忧伤、紧张</td>
                                </tr>
                                <tr>
                                    <td>减七和弦</td>
                                    <td>C + E♭ + G♭ + B♭♭</td>
                                    <td>C°7, Cdim7</td>
                                    <td>极不稳定、神秘</td>
                                </tr>
                                <tr>
                                    <td>小大七和弦</td>
                                    <td>C + E♭ + G + B</td>
                                    <td>CmM7</td>
                                    <td>复杂、深沉</td>
                                </tr>
                            </tbody>
                        </div>
                    </div>
                </section>
                
                <section id="extended" class="section">
                    <h3>扩展和弦（Extended Chords）</h3>
                    <div class="card">
                        <p>扩展和弦是在七和弦基础上继续叠加九度、十一度或十三度音的和弦。这些和弦常用于爵士乐、现代流行乐和电影配乐等风格，带来更复杂丰富的和声色彩。</p>
                        
                        <div class="chord-grid">
                            <div class="chord-card">
                                <div class="chord-title">九和弦（9th Chords）</div>
                                <div class="chord-description">在七和弦的基础上加入九音（距根音九度）。</div>
                                <div class="chord-example">例：C9 = C + E + G + B♭ + D</div>
                            </div>
                            <div class="chord-card">
                                <div class="chord-title">十一和弦（11th Chords）</div>
                                <div class="chord-description">在九和弦的基础上加入十一音（距根音十一度）。</div>
                                <div class="chord-example">例：C11 = C + E + G + B♭ + D + F</div>
                            </div>
                            <div class="chord-card">
                                <div class="chord-title">十三和弦（13th Chords）</div>
                                <div class="chord-description">在十一和弦的基础上加入十三音（距根音十三度）。</div>
                                <div class="chord-example">例：C13 = C + E + G + B♭ + D + F + A</div>
                            </div>
                        </div>
                    </div>
                </section>
                
                <section id="altered" class="section">
                    <h3>变化和弦（Altered Chords）</h3>
                    <div class="card">
                        <p>变化和弦是通过改变和弦中的某些音而创建的和弦。常见的变化包括升高或降低五音、九音、十一音或十三音。变化和弦通常具有较强的不协和性和戏剧性，常用于创造紧张感或特殊的音乐过渡。</p>
                        
                        <p>一些常见的变化和弦包括：</p>
                        <ul>
                            <li>Cmaj7#11（大七升十一和弦）- 常用于现代爵士</li>
                            <li>C7alt（变化属七和弦）- 包含至少一个变化音（♭9, #9, ♭5, #5）</li>
                            <li>C7sus4（属七挂四和弦）- 将三音替换为四音</li>
                        </ul>
                    </div>
                </section>
            </section>
            
            <section id="system" class="section">
                <h2>和弦标记系统</h2>
                <div class="card">
                    <p>为了在音乐创作和演奏中高效地表达和弦，音乐家发展出了多种和弦标记系统。最常见的包括流行音乐和爵士乐使用的字母标记法、古典音乐中的罗马数字标记法和吉他谱中的图形标记法。</p>
                    
                    <div class="note">
                        <p><strong>常见和弦标记举例：</strong></p>
                        <ul>
                            <li>C - C大三和弦</li>
                            <li>Cm, Cmin - C小三和弦</li>
                            <li>C7 - C属七和弦</li>
                            <li>Cmaj7, CM7 - C大七和弦</li>
                            <li>C° - C减三和弦</li>
                            <li>C+ - C增三和弦</li>
                        </ul>
                    </div>
                    
                    <p>除基本标记外，和弦还可以有各种修饰符号表示其特殊形态，如C7(♭9)表示C属七和弦加上降九音。</p>
                </div>
            </section>
            
            <section id="progression" class="section">
                <h2>和弦进行</h2>
                <div class="card">
                    <p>和弦进行（Chord Progression）指的是和弦按特定顺序的连接，它是音乐作品的和声骨架。优秀的和弦进行能够塑造音乐的情感走向和结构感。</p>
                    
                    <p>一些经典的和弦进行包括：</p>
                    <ul>
                        <li><strong>I-IV-V</strong> - 最基础的和弦进行，大量流行歌曲使用</li>
                        <li><strong>I-V-vi-IV</strong> - 流行音乐中极为常见的进行</li>
                        <li><strong>ii-V-I</strong> - 爵士乐中的标志性进行</li>
                        <li><strong>I-vi-IV-V</strong> - 50年代流行的"50s进行"</li>
                    </ul>
                    
                    <div class="chart-container" id="progression-chart"></div>
                </div>
            </section>
            
            <section id="applications" class="section">
                <h2>和弦的应用场景</h2>
                <div class="card">
                    <p>和弦在音乐的各个方面都有广泛应用：</p>
                    
                    <ul>
                        <li><strong>作曲与编曲</strong>：和弦是创作音乐的基础，确定歌曲的和声结构</li>
                        <li><strong>伴奏</strong>：钢琴、吉他等和声乐器通过和弦为旋律提供支撑</li>
                        <li><strong>即兴演奏</strong>：爵士乐手基于和弦框架进行即兴创作</li>
                        <li><strong>音乐分析</strong>：通过分析和弦进行理解音乐作品的结构和情感表达</li>
                        <li><strong>配器法</strong>：在管弦乐作品中，和弦被分配给不同乐器，创造丰富的音色层次</li>
                    </ul>
                    
                    <div class="note">
                        <p><strong>实用建议：</strong>初学者可以从学习基础三和弦开始，然后逐渐掌握七和弦和常见和弦进行。这些基础知识将为进一步探索更复杂的和声打下基础。</p>
                    </div>
                </div>
            </section>
            
            <section id="quiz" class="section">
                <h2>和弦知识小测验</h2>
                <div class="quiz-container">
                    <div class="quiz-title">测试你的和弦理解</div>
                    <div class="quiz-question">问题：以下哪种和弦由根音、小三度和减五度组成？</div>
                    <div class="quiz-options">
                        <div class="quiz-option" data-correct="false">
                            <span>A. 大三和弦 (Major Triad)</span>
                        </div>
                        <div class="quiz-option" data-correct="false">
                            <span>B. 小三和弦 (Minor Triad)</span>
                        </div>
                        <div class="quiz-option" data-correct="true">
                            <span>C. 减三和弦 (Diminished Triad)</span>
                        </div>
                        <div class="quiz-option" data-correct="false">
                            <span>D. 增三和弦 (Augmented Triad)</span>
                        </div>
                    </div>
                    <button class="quiz-check-btn">检查答案</button>
                    <div class="quiz-feedback correct">
                        <strong>正确！</strong> 减三和弦由根音、小三度和减五度组成，具有紧张不稳定的音响特性。
                    </div>
                    <div class="quiz-feedback incorrect">
                        <strong>再试一次！</strong> 减三和弦由根音、小三度和减五度组成，具有紧张不稳定的音响特性。
                    </div>
                </div>
            </section>
            
            <section id="interactive" class="section">
                <h2>互动和弦键盘</h2>
                <div class="card">
                    <p>尝试点击下方的琴键来体验不同和弦的音响效果。可以通过点击下面的按钮切换不同类型的和弦。</p>
                    
                    <div class="chord-buttons" style="display: flex; gap: 0.5rem; flex-wrap: wrap; margin: 1rem 0;">
                        <button class="quiz-check-btn" onclick="playChord('C')">C大三和弦</button>
                        <button class="quiz-check-btn" onclick="playChord('Cm')">C小三和弦</button>
                        <button class="quiz-check-btn" onclick="playChord('Cdim')">C减三和弦</button>
                        <button class="quiz-check-btn" onclick="playChord('Caug')">C增三和弦</button>
                        <button class="quiz-check-btn" onclick="playChord('C7')">C属七和弦</button>
                        <button class="quiz-check-btn" onclick="playChord('Cmaj7')">C大七和弦</button>
                    </div>
                    
                    <div class="piano-container">
                        <div class="piano" id="piano"></div>
                    </div>
                    
                    <p style="text-align: center; font-size: 0.9rem; color: var(--text-light);">注：实际的声音效果取决于您的设备音频支持。</p>
                </div>
            </section>
        </main>
    </div>
    
    <script>
    // 创建和弦间隔关系图表
    var intervalsChart = echarts.init(document.getElementById('intervals-chart'));
    var intervalsOption = {
        title: {
            text: '常见和弦的结构间隔',
            left: 'center'
        },
        tooltip: {
            trigger: 'item',
            formatter: '{b}: {c}'
        },
        color: ['#4F46E5', '#F59E0B', '#10B981', '#EF4444'],
        legend: {
            data: ['大三和弦', '小三和弦', '减三和弦', '增三和弦'],
            bottom: 'bottom'
        },
        radar: {
            shape: 'circle',
            indicator: [
                { name: '根音', max: 10 },
                { name: '三音', max: 10 },
                { name: '五音', max: 10 },
                { name: '七音', max: 10 },
                { name: '稳定性', max: 10 },
                { name: '明亮度', max: 10 }
            ]
        },
        series: [{
            name: '和弦特性',
            type: 'radar',
            data: [
                {
                    value: [10, 10, 7, 0, 9, 9],
                    name: '大三和弦',
                    areaStyle: {opacity: 0.3}
                },
                {
                    value: [10, 7, 7, 0, 7, 3],
                    name: '小三和弦',
                    areaStyle: {opacity: 0.3}
                },
                {
                    value: [10, 7, 4, 0, 3, 2],
                    name: '减三和弦',
                    areaStyle: {opacity: 0.3}
                },
                {
                    value: [10, 10, 10, 0, 4, 7],
                    name: '增三和弦',
                    areaStyle: {opacity: 0.3}
                }
            ]
        }]
    };
    intervalsChart.setOption(intervalsOption);

    // 创建和弦进行流行度图表
    var progressionChart = echarts.init(document.getElementById('progression-chart'));
    var progressionOption = {
        title: {
            text: '常见和弦进行的流行度',
            left: 'center'
        },
        tooltip: {
            trigger: 'axis',
            axisPointer: {
                type: 'shadow'
            }
        },
        grid: {
            left: '3%',
            right: '4%',
            bottom: '8%',
            containLabel: true
        },
        xAxis: {
            type: 'category',
            data: ['I-IV-V', 'I-V-vi-IV', 'ii-V-I', 'I-vi-IV-V', 'vi-IV-I-V', 'I-vi-ii-V'],
            axisTick: {
                alignWithLabel: true
            }
        },
        yAxis: {
            type: 'value',
            name: '使用频率',
            max: 100
        },
        series: [{
            name: '流行音乐',
            type: 'bar',
            data: [85, 95, 45, 75, 70, 60],
            itemStyle: {
                color: '#4F46E5'
            }
        }, {
            name: '爵士乐',
            type: 'bar',
            data: [30, 40, 95, 35, 25, 65],
            itemStyle: {
                color: '#F59E0B'
            }
        }, {
            name: '古典音乐',
            type: 'bar',
            data: [70, 35, 20, 55, 15, 45],
            itemStyle: {
                color: '#10B981'
            }
        }],
        legend: {
            data: ['流行音乐', '爵士乐', '古典音乐'],
            bottom: 'bottom'
        }
    };
    progressionChart.setOption(progressionOption);
    
    // 窗口大小变化时重绘图表
    window.addEventListener('resize', function() {
        intervalsChart.resize();
        progressionChart.resize();
    });
    
    // 创建钢琴键盘
    function createPiano() {
        const piano = document.getElementById('piano');
        const notes = [
            { note: 'C', isBlack: false }, 
            { note: 'C#', isBlack: true },
            { note: 'D', isBlack: false },
            { note: 'D#', isBlack: true },
            { note: 'E', isBlack: false },
            { note: 'F', isBlack: false },
            { note: 'F#', isBlack: true },
            { note: 'G', isBlack: false },
            { note: 'G#', isBlack: true },
            { note: 'A', isBlack: false },
            { note: 'A#', isBlack: true },
            { note: 'B', isBlack: false },
            { note: 'C2', isBlack: false }
        ];
        
        // 白键位置
        let whiteKeyIndex = 0;
        
        // 创建白键
        notes.forEach((note, index) => {
            if (!note.isBlack) {
                const whiteKey = document.createElement('div');
                whiteKey.className = 'white-key';
                whiteKey.dataset.note = note.note;
                whiteKey.innerHTML = `<div class="note-name">${note.note.replace('2', '')}</div>`;
                whiteKey.style.left = `${whiteKeyIndex * 40}px`;
                piano.appendChild(whiteKey);
                whiteKeyIndex++;
            }
        });
        
        // 创建黑键
        whiteKeyIndex = 0;
        notes.forEach((note, index) => {
            if (!note.isBlack) {
                if (index < notes.length - 1 && notes[index + 1].isBlack) {
                    const blackKey = document.createElement('div');
                    blackKey.className = 'black-key';
                    blackKey.dataset.note = notes[index + 1].note;
                    blackKey.innerHTML = `<div class="note-name">${notes[index + 1].note.replace('2', '')}</div>`;
                    blackKey.style.left = `${whiteKeyIndex * 40 + 28}px`;
                    piano.appendChild(blackKey);
                }
                whiteKeyIndex++;
            }
        });
    }
    
    createPiano();
    
    // 音频上下文
    let audioContext = null;
    
    // 初始化音频上下文
    function initAudio() {
        try {
            audioContext = new (window.AudioContext || window.webkitAudioContext)();
        } catch(e) {
            console.warn('Web Audio API不受支持，无法播放声音');
        }
    }
    
    // 播放单个音符
    function playNote(noteName, delay = 0, duration = 1) {
        if (!audioContext) initAudio();
        if (!audioContext) return;
        
        // 音符到频率的映射
        const noteToFreq = {
            'C': 261.63, 'C#': 277.18, 'D': 293.66, 'D#': 311.13, 'E': 329.63,
            'F': 349.23, 'F#': 369.99, 'G': 392.00, 'G#': 415.30, 'A': 440.00,
            'A#': 466.16, 'B': 493.88, 'C2': 523.25
        };
        
        // 创建振荡器
        const oscillator = audioContext.createOscillator();
        const gainNode = audioContext.createGain();
        
        oscillator.type = 'sine';
        oscillator.frequency.value = noteToFreq[noteName];
        
        // 连接节点
        oscillator.connect(gainNode);
        gainNode.connect(audioContext.destination);
        
        // 应用音量包络
        const now = audioContext.currentTime;
        gainNode.gain.setValueAtTime(0, now + delay);
        gainNode.gain.linearRampToValueAtTime(0.3, now + delay + 0.05);
        gainNode.gain.setValueAtTime(0.3, now + delay + duration - 0.05);
        gainNode.gain.linearRampToValueAtTime(0, now + delay + duration);
        
        // 播放和停止
        oscillator.start(now + delay);
        oscillator.stop(now + delay + duration);
        
        // 高亮对应的琴键
        setTimeout(() => {
            const key = document.querySelector(`.white-key[data-note="${noteName}"], .black-key[data-note="${noteName}"]`);
            if (key) {
                key.classList.add('active');
                setTimeout(() => key.classList.remove('active'), duration * 1000);
            }
        }, delay * 1000);
        
        return oscillator;
    }
    
    // 播放和弦
    function playChord(chordName) {
        // 和弦到音符的映射
        const chordMap = {
            'C': ['C', 'E', 'G'],
            'Cm': ['C', 'D#', 'G'],
            'Cdim': ['C', 'D#', 'F#'],
            'Caug': ['C', 'E', 'G#'],
            'C7': ['C', 'E', 'G', 'A#'],
            'Cmaj7': ['C', 'E', 'G', 'B']
        };
        
        const notes = chordMap[chordName];
        if (!notes) return;
        
        // 播放和弦中的每个音符
        notes.forEach((note, index) => {
            playNote(note, 0, 1.5);
        });
    }
    
    // 小测验的交互功能
    document.addEventListener('DOMContentLoaded', function() {
        const quizOptions = document.querySelectorAll('.quiz-option');
        const checkButton = document.querySelector('.quiz-check-btn');
        const correctFeedback = document.querySelector('.quiz-feedback.correct');
        const incorrectFeedback = document.querySelector('.quiz-feedback.incorrect');
        
        let selectedOption = null;
        
        // 选项点击事件
        quizOptions.forEach(option => {
            option.addEventListener('click', function() {
                // 移除之前的选择
                quizOptions.forEach(opt => opt.classList.remove('selected'));
                
                // 添加新选择
                this.classList.add('selected');
                selectedOption = this;
                
                // 隐藏反馈
                correctFeedback.style.display = 'none';
                incorrectFeedback.style.display = 'none';
            });
        });
        
        // 检查答案按钮点击事件
        checkButton.addEventListener('click', function() {
            if (!selectedOption) return;
            
            const isCorrect = selectedOption.dataset.correct === 'true';
            
            if (isCorrect) {
                correctFeedback.style.display = 'block';
                incorrectFeedback.style.display = 'none';
                createConfetti();
            } else {
                correctFeedback.style.display = 'none';
                incorrectFeedback.style.display = 'block';
            }
        });
    });
    
    // 创建庆祝效果
    function createConfetti() {
        const confettiCount = 100;
        const colors = ['#4F46E5', '#F59E0B', '#10B981', '#EF4444', '#EC4899'];
        
        for (let i = 0; i < confettiCount; i++) {
            const confetti = document.createElement('div');
            confetti.className = 'confetti';
            
            // 随机样式
            const color = colors[Math.floor(Math.random() * colors.length)];
            const size = Math.random() * 10 + 5;
            const rotateSpeed = Math.random() * 200 + 100;
            
            confetti.style.backgroundColor = color;
            confetti.style.width = `${size}px`;
            confetti.style.height = `${size}px`;
            confetti.style.position = 'fixed';
            confetti.style.top = '-10px';
            confetti.style.left = `${Math.random() * window.innerWidth}px`;
            confetti.style.borderRadius = Math.random() > 0.5 ? '50%' : '0';
            confetti.style.opacity = Math.random() + 0.5;
            
            document.body.appendChild(confetti);
            
            // 动画
            const animation = confetti.animate([
                {
                    transform: `translate(0, 0) rotate(0deg)`,
                    opacity: 1
                },
                {
                    transform: `translate(${Math.random() * 200 - 100}px, ${window.innerHeight}px) rotate(${Math.random() * 720}deg)`,
                    opacity: 0
                }
            ], {
                duration: Math.random() * 3000 + 2000,
                easing: 'cubic-bezier(0.1, 0.8, 0.5, 1)'
            });
            
            animation.onfinish = () => confetti.remove();
        }
    }
    
    // 活跃菜单追踪
    document.addEventListener('DOMContentLoaded', function() {
        const sections = document.querySelectorAll('section.section');
        const navLinks = document.querySelectorAll('.toc a');
        
        function highlightNavOnScroll() {
            let scrollPosition = window.scrollY;
            
            sections.forEach(section => {
                const sectionTop = section.offsetTop - 100;
                const sectionHeight = section.offsetHeight;
                const sectionId = section.getAttribute('id');
                
                if (scrollPosition >= sectionTop && scrollPosition < sectionTop + sectionHeight) {
                    navLinks.forEach(link => {
                        link.classList.remove('active');
                        if (link.getAttribute('href') === `#${sectionId}`) {
                            link.classList.add('active');
                        }
                    });
                }
            });
        }
        
        window.addEventListener('scroll', highlightNavOnScroll);
        highlightNavOnScroll(); // 页面加载时调用一次
    });
    </script>
</body>
</html>