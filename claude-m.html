<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>和弦理论基础：种类、结构与应用</title>
    <script src="https://cdn.jsdelivr.net/npm/echarts@5.4.3/dist/echarts.min.js"></script>
    <style>
        :root {
            --color-primary: #3F5D7D;
            --color-secondary: #C75146;
            --color-tertiary: #82A775;
            --color-background: #FDFCF9;
            --color-text: #2D3033;
            --color-text-light: #5D6167;
            --color-border: #EAEAEA;
            --font-sans: 'Noto Sans SC', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            --font-serif: 'Noto Serif SC', Georgia, serif;
            --font-mono: 'Source Code Pro', monospace;
            --radius-sm: 4px;
            --radius-md: 8px;
            --shadow-sm: 0 2px 4px rgba(0,0,0,0.05);
            --shadow-md: 0 4px 12px rgba(0,0,0,0.08);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background-color: var(--color-background);
            color: var(--color-text);
            font-family: var(--font-sans);
            line-height: 1.6;
            padding-bottom: 60px;
        }

        .container {
            width: 100%;
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
        }

        .sidebar {
            width: 280px;
            padding: 120px 25px 40px 0;
            position: sticky;
            top: 0;
            height: 100vh;
            overflow-y: auto;
            display: none;
        }

        @media (min-width: 1024px) {
            .sidebar {
                display: block;
            }
        }

        .main-content {
            flex: 1;
            padding: 40px 25px;
            max-width: 100%;
        }

        @media (min-width: 1024px) {
            .main-content {
                padding: 80px 50px 40px;
                max-width: calc(100% - 280px);
            }
        }

        .header {
            margin-bottom: 40px;
            position: relative;
        }

        .header:after {
            content: '';
            position: absolute;
            bottom: -20px;
            left: 0;
            width: 60px;
            height: 4px;
            background-color: var(--color-secondary);
        }

        h1 {
            font-family: var(--font-serif);
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 16px;
            color: var(--color-primary);
            line-height: 1.2;
        }

        h2 {
            font-family: var(--font-serif);
            font-size: 1.75rem;
            font-weight: 600;
            margin: 60px 0 24px;
            color: var(--color-primary);
            position: relative;
        }

        h3 {
            font-size: 1.25rem;
            font-weight: 600;
            margin: 30px 0 20px;
            color: var(--color-primary);
        }

        p {
            margin-bottom: 20px;
            font-size: 1.05rem;
        }

        .lead {
            font-size: 1.25rem;
            color: var(--color-text-light);
            font-weight: 300;
            margin-bottom: 32px;
            max-width: 700px;
        }

        a {
            color: var(--color-secondary);
            text-decoration: none;
            border-bottom: 1px solid transparent;
            transition: border-color 0.3s;
        }

        a:hover {
            border-color: var(--color-secondary);
        }

        .toc {
            list-style: none;
        }

        .toc li {
            margin-bottom: 10px;
        }

        .toc a {
            color: var(--color-text-light);
            font-size: 0.95rem;
            display: block;
            padding: 6px 10px;
            border-radius: var(--radius-sm);
            border: none;
            transition: all 0.2s;
        }

        .toc a:hover, .toc a.active {
            background-color: rgba(63, 93, 125, 0.1);
            color: var(--color-primary);
            transform: translateX(5px);
        }

        .toc-subtitle {
            margin-top: 5px;
            font-size: 0.9em;
            padding-left: 20px;
        }

        .visualization-container {
            margin: 40px 0;
            border-radius: var(--radius-md);
            overflow: hidden;
            background-color: white;
            box-shadow: var(--shadow-sm);
        }

        .chart-container {
            width: 100%;
            height: 300px;
            margin: 30px 0;
            background: white;
            border-radius: var(--radius-md);
            overflow: hidden;
            box-shadow: var(--shadow-sm);
        }

        .keyboard {
            width: 100%;
            height: 220px;
            margin: 30px 0;
            border-radius: var(--radius-md);
            overflow: hidden;
            box-shadow: var(--shadow-sm);
        }

        .piano-container {
            margin: 40px 0;
            position: relative;
            width: 100%;
        }

        .chord-box {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }

        .chord-card {
            background: white;
            border-radius: var(--radius-md);
            padding: 20px;
            box-shadow: var(--shadow-sm);
            border-left: 4px solid var(--color-tertiary);
            transition: transform 0.3s, box-shadow 0.3s;
        }

        .chord-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-md);
        }

        .chord-name {
            font-weight: 600;
            font-size: 1.2rem;
            margin-bottom: 10px;
            color: var(--color-primary);
        }

        .chord-desc {
            color: var(--color-text-light);
            font-size: 0.95rem;
            margin-bottom: 15px;
        }

        .chord-notes {
            display: flex;
            gap: 10px;
            margin-top: 15px;
        }

        .note {
            width: 35px;
            height: 35px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            background-color: var(--color-primary);
            color: white;
            font-weight: 500;
            font-size: 0.9rem;
        }

        .quiz-section {
            background: linear-gradient(to right, rgba(63, 93, 125, 0.1), rgba(63, 93, 125, 0.05));
            border-radius: var(--radius-md);
            padding: 30px;
            margin: 50px 0;
        }

        .quiz-title {
            font-size: 1.4rem;
            color: var(--color-primary);
            margin-bottom: 20px;
        }

        .quiz-question {
            font-size: 1.1rem;
            font-weight: 500;
            margin-bottom: 20px;
        }

        .quiz-options {
            display: grid;
            gap: 12px;
            margin-bottom: 30px;
        }

        .quiz-option {
            background: white;
            border: 1px solid var(--color-border);
            border-radius: var(--radius-sm);
            padding: 12px 16px;
            cursor: pointer;
            transition: all 0.2s;
            position: relative;
            padding-left: 40px;
        }

        .quiz-option:before {
            content: '';
            position: absolute;
            left: 15px;
            top: 50%;
            transform: translateY(-50%);
            width: 16px;
            height: 16px;
            border: 2px solid var(--color-primary);
            border-radius: 50%;
        }

        .quiz-option:hover {
            background-color: rgba(63, 93, 125, 0.05);
        }

        .quiz-option.selected {
            background-color: rgba(63, 93, 125, 0.1);
            border-color: var(--color-primary);
        }

        .quiz-option.selected:before {
            background-color: var(--color-primary);
        }

        .quiz-option.correct {
            background-color: rgba(130, 167, 117, 0.2);
            border-color: var(--color-tertiary);
        }

        .quiz-option.correct:before {
            background-color: var(--color-tertiary);
            border-color: var(--color-tertiary);
        }

        .quiz-option.wrong {
            background-color: rgba(199, 81, 70, 0.1);
            border-color: var(--color-secondary);
        }

        .check-button {
            background-color: var(--color-primary);
            color: white;
            border: none;
            border-radius: var(--radius-sm);
            padding: 12px 24px;
            font-size: 1rem;
            font-weight: 500;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        .check-button:hover {
            background-color: #304B6A;
        }

        .explanation {
            margin-top: 20px;
            padding: 15px;
            border-radius: var(--radius-sm);
            background-color: rgba(255, 255, 255, 0.7);
            display: none;
        }

        .reward {
            margin-top: 25px;
            padding: 20px;
            background: linear-gradient(45deg, #FEAC5E, #C779D0, #4BC0C8);
            border-radius: var(--radius-md);
            color: white;
            text-align: center;
            font-weight: 500;
            display: none;
            animation: slideIn 0.5s ease-out;
        }

        @keyframes slideIn {
            from { transform: translateY(-20px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin: 30px 0;
            box-shadow: var(--shadow-sm);
            border-radius: var(--radius-md);
            overflow: hidden;
        }

        thead {
            background-color: var(--color-primary);
            color: white;
        }

        th {
            text-align: left;
            padding: 15px 20px;
            font-weight: 600;
        }

        td {
            padding: 12px 20px;
            border-bottom: 1px solid var(--color-border);
            background-color: white;
        }

        tr:last-child td {
            border-bottom: none;
        }

        tr:nth-child(even) td {
            background-color: rgba(63, 93, 125, 0.03);
        }

        figure {
            margin: 40px 0;
        }

        figcaption {
            margin-top: 10px;
            text-align: center;
            color: var(--color-text-light);
            font-size: 0.9rem;
        }

        code {
            font-family: var(--font-mono);
            background: rgba(63, 93, 125, 0.08);
            padding: 2px 4px;
            border-radius: 3px;
            font-size: 0.9em;
            color: var(--color-primary);
        }

        .tip {
            background: rgba(130, 167, 117, 0.1);
            border-left: 4px solid var(--color-tertiary);
            padding: 20px;
            margin: 30px 0;
            border-radius: 0 var(--radius-sm) var(--radius-sm) 0;
        }

        .highlight {
            background: linear-gradient(transparent 80%, rgba(199, 81, 70, 0.2) 50%);
            padding: 0 4px;
        }
    </style>
</head>
<body>
    <div class="container">
        <aside class="sidebar">
            <ul class="toc">
                <li><a href="#definition">和弦的定义与基本概念</a></li>
                <li><a href="#structure">和弦的构成与结构</a></li>
                <li>
                    <a href="#types">和弦的种类</a>
                    <ul class="toc-subtitle">
                        <li><a href="#triad">三和弦</a></li>
                        <li><a href="#seventh">七和弦</a></li>
                        <li><a href="#extended">扩展和弦</a></li>
                        <li><a href="#altered">变化和弦</a></li>
                    </ul>
                </li>
                <li><a href="#inversions">和弦转位</a></li>
                <li><a href="#functions">和弦功能与进行</a></li>
                <li><a href="#genres">不同音乐风格中的和弦应用</a></li>
                <li><a href="#quiz">和弦理解测试</a></li>
            </ul>
        </aside>

        <main class="main-content">
            <div class="header">
                <h1>和弦理论：音乐中的和声基础</h1>
                <p class="lead">和弦是音乐中最基本的和声结构，它是由多个音符同时发声组成的音响。从古典到流行，从爵士到民谣，和弦在各种音乐风格中都扮演着至关重要的角色。</p>
            </div>

            <section id="definition">
                <h2>和弦的定义与基本概念</h2>
                <p>和弦（Chord）是指由三个或更多音同时或相继弹奏而形成的组合。这些音按照一定的音程关系排列，产生特定的和声效果。最基本的和弦由三个音组成，称为"三和弦"。</p>
                
                <div class="chart-container" id="chord-concept"></div>
                
                <p>和弦可以看作是音乐的"色彩"，为旋律提供背景和情感支持。在西方音乐理论中，和弦通常基于三度叠置原则构建，即相邻音之间的音程为三度（大三度或小三度）。</p>
            </section>

            <section id="structure">
                <h2>和弦的构成与结构</h2>
                <p>和弦中的各个音有特定的名称和功能：</p>
                <ul style="margin-bottom: 20px; margin-left: 20px;">
                    <li><strong>根音（Root）</strong>：和弦的基础音，通常决定了和弦的名称</li>
                    <li><strong>三音（Third）</strong>：根音上方的第三个音，决定和弦的"性质"（大调或小调）</li>
                    <li><strong>五音（Fifth）</strong>：根音上方的第五个音，增强和弦的稳定性</li>
                    <li><strong>七音（Seventh）</strong>：根音上方的第七个音，出现在七和弦中</li>
                    <li><strong>九音、十一音、十三音</strong>：出现在扩展和弦中</li>
                </ul>
                
                <div class="keyboard" id="interactive-keyboard"></div>
                
                <div class="tip">
                    <p><strong>小提示</strong>：在学习和弦时，想象将它们构建为一栋建筑物。根音是地基，三音决定房子的"性格"，而额外的音则像是装饰和扩建，增加了复杂性和变化。</p>
                </div>
            </section>

            <section id="types">
                <h2>和弦的种类</h2>
                <p>按照结构和所包含的音符数量，和弦可以分为多种类型。以下是主要的和弦类型介绍：</p>
                
                <section id="triad">
                    <h3>三和弦（Triads）</h3>
                    <p>三和弦是最基本的和弦形式，由三个音按照特定的三度关系组成。根据音符间隔，可分为四种基本类型：</p>
                    
                    <div class="chord-box">
                        <div class="chord-card">
                            <div class="chord-name">大三和弦（Major Triad）</div>
                            <div class="chord-desc">包含根音、大三度和完全五度。性质明亮、稳定、愉悦。</div>
                            <div class="chord-example">例：C大三和弦（C-E-G）</div>
                            <div class="chord-notes">
                                <div class="note">C</div>
                                <div class="note">E</div>
                                <div class="note">G</div>
                            </div>
                        </div>
                        
                        <div class="chord-card">
                            <div class="chord-name">小三和弦（Minor Triad）</div>
                            <div class="chord-desc">包含根音、小三度和完全五度。性质忧伤、温和、内敛。</div>
                            <div class="chord-example">例：Cm三和弦（C-E♭-G）</div>
                            <div class="chord-notes">
                                <div class="note">C</div>
                                <div class="note">E♭</div>
                                <div class="note">G</div>
                            </div>
                        </div>
                        
                        <div class="chord-card">
                            <div class="chord-name">增三和弦（Augmented Triad）</div>
                            <div class="chord-desc">包含根音、大三度和增五度。性质紧张、不稳定。</div>
                            <div class="chord-example">例：Caug三和弦（C-E-G♯）</div>
                            <div class="chord-notes">
                                <div class="note">C</div>
                                <div class="note">E</div>
                                <div class="note">G♯</div>
                            </div>
                        </div>
                        
                        <div class="chord-card">
                            <div class="chord-name">减三和弦（Diminished Triad）</div>
                            <div class="chord-desc">包含根音、小三度和减五度。性质阴暗、神秘、不稳定。</div>
                            <div class="chord-example">例：Cdim三和弦（C-E♭-G♭）</div>
                            <div class="chord-notes">
                                <div class="note">C</div>
                                <div class="note">E♭</div>
                                <div class="note">G♭</div>
                            </div>
                        </div>
                    </div>
                </section>
                
                <section id="seventh">
                    <h3>七和弦（Seventh Chords）</h3>
                    <p>七和弦是在三和弦的基础上加入了根音上方第七个音（七音）的和弦。常见的七和弦类型有：</p>
                    
                    <div class="chord-box">
                        <div class="chord-card">
                            <div class="chord-name">大七和弦（Major 7th）</div>
                            <div class="chord-desc">大三和弦加大七度。明亮而温暖，常用于爵士和流行音乐。</div>
                            <div class="chord-example">例：Cmaj7（C-E-G-B）</div>
                            <div class="chord-notes">
                                <div class="note">C</div>
                                <div class="note">E</div>
                                <div class="note">G</div>
                                <div class="note">B</div>
                            </div>
                        </div>
                        
                        <div class="chord-card">
                            <div class="chord-name">属七和弦（Dominant 7th）</div>
                            <div class="chord-desc">大三和弦加小七度。有强烈的解决倾向，是和声功能理论中最具张力的和弦。</div>
                            <div class="chord-example">例：C7（C-E-G-B♭）</div>
                            <div class="chord-notes">
                                <div class="note">C</div>
                                <div class="note">E</div>
                                <div class="note">G</div>
                                <div class="note">B♭</div>
                            </div>
                        </div>
                        
                        <div class="chord-card">
                            <div class="chord-name">小七和弦（Minor 7th）</div>
                            <div class="chord-desc">小三和弦加小七度。柔和、忧郁，在爵士和流行音乐中广泛使用。</div>
                            <div class="chord-example">例：Cm7（C-E♭-G-B♭）</div>
                            <div class="chord-notes">
                                <div class="note">C</div>
                                <div class="note">E♭</div>
                                <div class="note">G</div>
                                <div class="note">B♭</div>
                            </div>
                        </div>
                        
                        <div class="chord-card">
                            <div class="chord-name">半减七和弦（Half-diminished 7th）</div>
                            <div class="chord-desc">减三和弦加小七度。富有表现力，不稳定。</div>
                            <div class="chord-example">例：Cm7♭5（C-E♭-G♭-B♭）</div>
                            <div class="chord-notes">
                                <div class="note">C</div>
                                <div class="note">E♭</div>
                                <div class="note">G♭</div>
                                <div class="note">B♭</div>
                            </div>
                        </div>
                        
                        <div class="chord-card">
                            <div class="chord-name">减七和弦（Diminished 7th）</div>
                            <div class="chord-desc">减三和弦加减七度。极度不稳定，常用于戏剧性转调。</div>
                            <div class="chord-example">例：Cdim7（C-E♭-G♭-A）</div>
                            <div class="chord-notes">
                                <div class="note">C</div>
                                <div class="note">E♭</div>
                                <div class="note">G♭</div>
                                <div class="note">A</div>
                            </div>
                        </div>
                        
                        <div class="chord-card">
                            <div class="chord-name">小大七和弦（Minor-Major 7th）</div>
                            <div class="chord-desc">小三和弦加大七度。独特而迷人，常用于电影配乐。</div>
                            <div class="chord-example">例：CmM7（C-E♭-G-B）</div>
                            <div class="chord-notes">
                                <div class="note">C</div>
                                <div class="note">E♭</div>
                                <div class="note">G</div>
                                <div class="note">B</div>
                            </div>
                        </div>
                    </div>
                </section>
                
                <section id="extended">
                    <h3>扩展和弦（Extended Chords）</h3>
                    <p>扩展和弦是在七和弦基础上继续叠加九度、十一度或十三度音程的和弦。这些和弦常见于爵士乐、融合音乐等风格中：</p>
                    
                    <div class="chord-box">
                        <div class="chord-card">
                            <div class="chord-name">九和弦（9th Chords）</div>
                            <div class="chord-desc">七和弦加九音。常见形式有maj9、9、m9等。</div>
                            <div class="chord-example">例：C9（C-E-G-B♭-D）</div>
                        </div>
                        
                        <div class="chord-card">
                            <div class="chord-name">十一和弦（11th Chords）</div>
                            <div class="chord-desc">九和弦加十一音。增加了更多的音色层次。</div>
                            <div class="chord-example">例：C11（C-E-G-B♭-D-F）</div>
                        </div>
                        
                        <div class="chord-card">
                            <div class="chord-name">十三和弦（13th Chords）</div>
                            <div class="chord-desc">十一和弦加十三音。最丰富的扩展和弦。</div>
                            <div class="chord-example">例：C13（C-E-G-B♭-D-F-A）</div>
                        </div>
                    </div>
                    
                    <div class="chart-container" id="extended-chords-chart"></div>
                </section>
                
                <section id="altered">
                    <h3>变化和弦（Altered Chords）</h3>
                    <p>变化和弦是指对标准和弦结构中的某些音进行变化（升高或降低）的和弦，常见于爵士和现代音乐中。例如：</p>
                    
                    <ul style="margin-bottom: 20px; margin-left: 20px;">
                        <li><strong>增六和弦（Augmented 6th Chords）</strong>：如意大利增六、德国增六和弦</li>
                        <li><strong>挂四和弦（Sus4 Chords）</strong>：用完全四度代替三度的和弦</li>
                        <li><strong>加九和弦（Add9 Chords）</strong>：在三和弦上加入九音但不含七音的和弦</li>
                        <li><strong>变化属七和弦（Altered Dominant Chords）</strong>：如C7♭9、C7♯11等</li>
                    </ul>
                </section>

                <div class="tip">
                    <p>总计一下，基本和弦类型可以分类为：4种三和弦、7种七和弦、多种扩展和弦（九、十一、十三和弦）以及各种变化和弦。当考虑到每个根音上都可以构建这些和弦类型，实际的和弦数量是非常庞大的。</p>
                </div>
                
                <div class="chart-container" id="chord-types-pie"></div>
            </section>

            <section id="inversions">
                <h2>和弦转位</h2>
                <p>和弦转位是指改变和弦中音符的排列顺序，使得根音不在最低声部的和弦形式。和弦转位丰富了和声的表现力，并能使声部进行更加流畅。</p>
                
                <h3>三和弦的转位</h3>
                <ul style="margin-bottom: 20px; margin-left: 20px;">
                    <li><strong>原位（Root Position）</strong>：根音在最低声部，如 C-E-G</li>
                    <li><strong>第一转位（First Inversion）</strong>：三音在最低声部，如 E-G-C</li>
                    <li><strong>第二转位（Second Inversion）</strong>：五音在最低声部，如 G-C-E</li>
                </ul>
                
                <h3>七和弦的转位</h3>
                <ul style="margin-bottom: 20px; margin-left: 20px;">
                    <li><strong>原位</strong>：根音在最低声部，如 C-E-G-B♭</li>
                    <li><strong>第一转位</strong>：三音在最低声部，如 E-G-B♭-C</li>
                    <li><strong>第二转位</strong>：五音在最低声部，如 G-B♭-C-E</li>
                    <li><strong>第三转位</strong>：七音在最低声部，如 B♭-C-E-G</li>
                </ul>
                
                <div class="chart-container" id="inversions-chart"></div>
            </section>

            <section id="functions">
                <h2>和弦功能与进行</h2>
                <p>在调性音乐中，和弦具有特定的功能，主要分为三类：</p>
                
                <ul style="margin-bottom: 20px; margin-left: 20px;">
                    <li><strong>主和弦（Tonic）</strong>：I级、III级和VI级，具有稳定性和终止感</li>
                    <li><strong>属和弦（Dominant）</strong>：V级和VII级，具有紧张感和推动力，倾向于解决到主和弦</li>
                    <li><strong>下属和弦（Subdominant）</strong>：IV级和II级，起到连接主和弦与属和弦的作用</li>
                </ul>
                
                <p>一些常见的和弦进行模式包括：</p>
                <div class="chord-box">
                    <div class="chord-card">
                        <div class="chord-name">I-IV-V-I</div>
                        <div class="chord-desc">最基础的和弦进行，广泛用于流行、摇滚和民谣音乐</div>
                    </div>
                    
                    <div class="chord-card">
                        <div class="chord-name">I-V-vi-IV</div>
                        <div class="chord-desc">非常流行的进行，被称为"四和弦万能公式"</div>
                    </div>
                    
                    <div class="chord-card">
                        <div class="chord-name">ii-V-I</div>
                        <div class="chord-desc">爵士乐中最常见的和弦进行</div>
                    </div>
                    
                    <div class="chord-card">
                        <div class="chord-name">I-vi-IV-V</div>
                        <div class="chord-desc">50年代流行的"哀伤进行"，如"Stand By Me"</div>
                    </div>
                </div>
                
                <div class="chart-container" id="chord-progression-chart"></div>
            </section>

            <section id="genres">
                <h2>不同音乐风格中的和弦应用</h2>
                
                <table>
                    <thead>
                        <tr>
                            <th>音乐风格</th>
                            <th>特点和弦类型</th>
                            <th>例曲</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>古典音乐</td>
                            <td>三和弦为主，功能和声关系明确</td>
                            <td>莫扎特《小夜曲》</td>
                        </tr>
                        <tr>
                            <td>爵士乐</td>
                            <td>七和弦、扩展和弦、变化和弦</td>
                            <td>Miles Davis《So What》</td>
                        </tr>
                        <tr>
                            <td>蓝调</td>
                            <td>属七和弦序列，12小节布鲁斯</td>
                            <td>B.B. King《The Thrill Is Gone》</td>
                        </tr>
                        <tr>
                            <td>流行/摇滚</td>
                            <td>基本三和弦，简单循环进行</td>
                            <td>The Beatles《Hey Jude》</td>
                        </tr>
                        <tr>
                            <td>电子音乐</td>
                            <td>简约和弦，悬置和弦，氛围和声</td>
                            <td>Daft Punk《Get Lucky》</td>
                        </tr>
                    </tbody>
                </table>
            </section>

            <section id="quiz" class="quiz-section">
                <h2 class="quiz-title">和弦理解测试</h2>
                <p class="quiz-question">问题：下列哪个和弦是由根音、小三度和完全五度组成的？</p>
                <div class="quiz-options">
                    <div class="quiz-option" data-correct="false">A. 大三和弦 (Major Triad)</div>
                    <div class="quiz-option" data-correct="true">B. 小三和弦 (Minor Triad)</div>
                    <div class="quiz-option" data-correct="false">C. 增三和弦 (Augmented Triad)</div>
                    <div class="quiz-option" data-correct="false">D. 减三和弦 (Diminished Triad)</div>
                </div>
                <button class="check-button">检查答案</button>
                <div class="explanation">
                    <p><strong>解释：</strong>小三和弦由根音、小三度和完全五度组成。而大三和弦由根音、大三度和完全五度组成；增三和弦由根音、大三度和增五度组成；减三和弦由根音、小三度和减五度组成。</p>
                </div>
                <div class="reward">
                    <p>🎵 恭喜你！你对和弦结构有很好的理解。继续探索和弦的奇妙世界吧！</p>
                </div>
            </section>
        </main>
    </div>

    <script>
        // 初始化ECharts图表
        document.addEventListener('DOMContentLoaded', function() {
            // 和弦概念图表
            const chordConceptChart = echarts.init(document.getElementById('chord-concept'));
            const chordConceptOption = {
                title: {
                    text: '和弦的构成',
                    left: 'center',
                    textStyle: {
                        fontWeight: 'normal'
                    }
                },
                tooltip: {
                    trigger: 'item',
                    formatter: '{b}: {c}'
                },
                series: [
                    {
                        type: 'graph',
                        layout: 'force',
                        symbolSize: 50,
                        roam: true,
                        label: {
                            show: true
                        },
                        edgeSymbol: ['none', 'arrow'],
                        edgeSymbolSize: [4, 10],
                        edgeLabel: {
                            fontSize: 12
                        },
                        data: [
                            {name: '根音(Root)', value: 1, category: 0, itemStyle: { color: '#3F5D7D' }},
                            {name: '三音(Third)', value: 1, category: 1, itemStyle: { color: '#C75146' }},
                            {name: '五音(Fifth)', value: 1, category: 2, itemStyle: { color: '#82A775' }},
                            {name: '和弦', value: 1, category: 3, itemStyle: { color: '#E4B363' }, symbolSize: 70}
                        ],
                        links: [
                            {source: '根音(Root)', target: '和弦', value: '决定和弦的名称'},
                            {source: '三音(Third)', target: '和弦', value: '决定和弦的性质'},
                            {source: '五音(Fifth)', target: '和弦', value: '增强和弦的稳定性'}
                        ],
                        lineStyle: {
                            opacity: 0.9,
                            width: 2,
                            curveness: 0
                        }
                    }
                ]
            };
            chordConceptChart.setOption(chordConceptOption);

            // 和弦种类饼图
            const chordTypesPie = echarts.init(document.getElementById('chord-types-pie'));
            const chordTypesPieOption = {
                title: {
                    text: '和弦类型占比分析',
                    left: 'center',
                    textStyle: {
                        fontWeight: 'normal'
                    }
                },
                tooltip: {
                    trigger: 'item',
                    formatter: '{a} <br/>{b} : {c} ({d}%)'
                },
                legend: {
                    orient: 'vertical',
                    left: 'left',
                },
                series: [
                    {
                        name: '和弦类型',
                        type: 'pie',
                        radius: '60%',
                        center: ['50%', '55%'],
                        data: [
                            {value: 4, name: '三和弦', itemStyle: {color: '#3F5D7D'}},
                            {value: 7, name: '七和弦', itemStyle: {color: '#C75146'}},
                            {value: 12, name: '扩展和弦', itemStyle: {color: '#82A775'}},
                            {value: 15, name: '变化和弦', itemStyle: {color: '#E4B363'}}
                        ],
                        emphasis: {
                            itemStyle: {
                                shadowBlur: 10,
                                shadowOffsetX: 0,
                                shadowColor: 'rgba(0, 0, 0, 0.5)'
                            }
                        }
                    }
                ]
            };
            chordTypesPie.setOption(chordTypesPieOption);

            // 扩展和弦图表
            const extendedChordsChart = echarts.init(document.getElementById('extended-chords-chart'));
            const extendedChordsOption = {
                title: {
                    text: '扩展和弦音符层级',
                    left: 'center',
                    textStyle: {
                        fontWeight: 'normal'
                    }
                },
                tooltip: {
                    formatter: '{b}: {c}'
                },
                xAxis: {
                    type: 'category',
                    data: ['三和弦', '七和弦', '九和弦', '十一和弦', '十三和弦'],
                    axisLabel: {
                        interval: 0
                    }
                },
                yAxis: {
                    type: 'value',
                    name: '包含音数',
                    axisLabel: {
                        formatter: '{value}个音'
                    }
                },
                series: [
                    {
                        data: [3, 4, 5, 6, 7],
                        type: 'bar',
                        barWidth: '40%',
                        itemStyle: {
                            color: function(params) {
                                const colorList = ['#3F5D7D', '#5D7D9A', '#82A775', '#A7BEAA', '#C75146'];
                                return colorList[params.dataIndex];
                            }
                        }
                    }
                ]
            };
            extendedChordsChart.setOption(extendedChordsOption);

            // 和弦转位图表
            const inversionsChart = echarts.init(document.getElementById('inversions-chart'));
            const inversionsOption = {
                title: {
                    text: '三和弦转位示意',
                    left: 'center',
                    textStyle: {
                        fontWeight: 'normal'
                    }
                },
                tooltip: {
                    trigger: 'axis',
                    formatter: function(params) {
                        const notes = [
                            ['C', 'E', 'G'],
                            ['E', 'G', 'C'],
                            ['G', 'C', 'E']
                        ];
                        const index = params[0].dataIndex;
                        return `${params[0].name}<br/>音符排列: ${notes[index].join('-')}`;
                    }
                },
                xAxis: {
                    type: 'category',
                    data: ['原位', '第一转位', '第二转位'],
                    axisLabel: {
                        interval: 0
                    }
                },
                yAxis: {
                    type: 'value',
                    show: false
                },
                series: [
                    {
                        name: 'C和弦转位',
                        type: 'pictorialBar',
                        symbol: 'circle',
                        symbolSize: [40, 40],
                        symbolPosition: 'start',
                        symbolOffset: [0, 0],
                        data: [
                            {
                                value: 3,
                                symbolPosition: 'start',
                                itemStyle: {
                                    color: '#3F5D7D'
                                }
                            },
                            {
                                value: 3,
                                symbolPosition: 'start',
                                itemStyle: {
                                    color: '#C75146'
                                }
                            },
                            {
                                value: 3,
                                symbolPosition: 'start',
                                itemStyle: {
                                    color: '#82A775'
                                }
                            }
                        ],
                        z: 10
                    }
                ]
            };
            inversionsChart.setOption(inversionsOption);

            // 和弦进行图表
            const chordProgressionChart = echarts.init(document.getElementById('chord-progression-chart'));
            const chordProgressionOption = {
                title: {
                    text: '常见和弦进行示意',
                    left: 'center',
                    textStyle: {
                        fontWeight: 'normal'
                    }
                },
                tooltip: {
                    trigger: 'item'
                },
                series: [
                    {
                        type: 'sankey',
                        data: [
                            {name: 'I级'},
                            {name: 'ii级'},
                            {name: 'IV级'},
                            {name: 'V级'},
                            {name: 'vi级'}
                        ],
                        links: [
                            {source: 'I级', target: 'IV级', value: 5},
                            {source: 'I级', target: 'V级', value: 3},
                            {source: 'I级', target: 'vi级', value: 4},
                            {source: 'IV级', target: 'V级', value: 5},
                            {source: 'IV级', target: 'I级', value: 3},
                            {source: 'V级', target: 'I级', value: 8},
                            {source: 'vi级', target: 'IV级', value: 4},
                            {source: 'ii级', target: 'V级', value: 6}
                        ],
                        emphasis: {
                            focus: 'adjacency'
                        },
                        lineStyle: {
                            color: 'gradient',
                            curveness: 0.5
                        }
                    }
                ]
            };
            chordProgressionChart.setOption(chordProgressionOption);
            
            // 互动钢琴键盘
            const keyboardChart = echarts.init(document.getElementById('interactive-keyboard'));
            const keyboardOption = {
                title: {
                    text: '点击音符查看C大调不同和弦构成',
                    left: 'center',
                    textStyle: {
                        fontWeight: 'normal'
                    }
                },
                tooltip: {
                    show: true
                },
                animation: false,
                grid: {
                    left: '5%',
                    right: '5%',
                    bottom: '15%',
                    top: '20%',
                    containLabel: true
                },
                xAxis: {
                    type: 'category',
                    data: ['C', 'C♯/D♭', 'D', 'D♯/E♭', 'E', 'F', 'F♯/G♭', 'G', 'G♯/A♭', 'A', 'A♯/B♭', 'B'],
                    axisLine: {show: false},
                    axisTick: {show: false},
                    axisLabel: {
                        interval: 0,
                        rotate: 0
                    }
                },
                yAxis: {
                    type: 'value',
                    show: false,
                    min: 0,
                    max: 100
                },
                series: [
                    {
                        type: 'bar',
                        barWidth: '60%',
                        data: [
                            {
                                value: 80,
                                itemStyle: {
                                    color: '#FFFFFF',
                                    borderColor: '#000000',
                                    borderWidth: 1
                                },
                                emphasis: {
                                    itemStyle: {
                                        color: '#C15A36'
                                    }
                                },
                                tooltip: {
                                    formatter: function() {
                                        return 'C (Do): C大三和弦的根音；<br>C大三和弦(Do-Mi-Sol): C-E-G<br>C小三和弦(Do-♭Mi-Sol): C-E♭-G';
                                    }
                                }
                            },
                            {
                                value: 60,
                                itemStyle: {
                                    color: '#000000'
                                },
                                tooltip: {
                                    formatter: 'C♯/D♭'
                                }
                            },
                            {
                                value: 80,
                                itemStyle: {
                                    color: '#FFFFFF',
                                    borderColor: '#000000',
                                    borderWidth: 1
                                },
                                emphasis: {
                                    itemStyle: {
                                        color: '#DCA762'
                                    }
                                },
                                tooltip: {
                                    formatter: function() {
                                        return 'D (Re): D小三和弦的根音；<br>D小三和弦(Re-Fa-La): D-F-A';
                                    }
                                }
                            },
                            {
                                value: 60,
                                itemStyle: {
                                    color: '#000000'
                                },
                                tooltip: {
                                    formatter: 'D♯/E♭'
                                }
                            },
                            {
                                value: 80,
                                itemStyle: {
                                    color: '#FFFFFF',
                                    borderColor: '#000000',
                                    borderWidth: 1
                                },
                                emphasis: {
                                    itemStyle: {
                                        color: '#C15A36'
                                    }
                                },
                                tooltip: {
                                    formatter: function() {
                                        return 'E (Mi): C大三和弦的三音；<br>E小三和弦(Mi-Sol-Si): E-G-B';
                                    }
                                }
                            },
                            {
                                value: 80,
                                itemStyle: {
                                    color: '#FFFFFF',
                                    borderColor: '#000000',
                                    borderWidth: 1
                                },
                                emphasis: {
                                    itemStyle: {
                                        color: '#8EA580'
                                    }
                                },
                                tooltip: {
                                    formatter: function() {
                                        return 'F (Fa): F大三和弦的根音；<br>F大三和弦(Fa-La-Do): F-A-C';
                                    }
                                }
                            },
                            {
                                value: 60,
                                itemStyle: {
                                    color: '#000000'
                                },
                                tooltip: {
                                    formatter: 'F♯/G♭'
                                }
                            },
                            {
                                value: 80,
                                itemStyle: {
                                    color: '#FFFFFF',
                                    borderColor: '#000000',
                                    borderWidth: 1
                                },
                                emphasis: {
                                    itemStyle: {
                                        color: '#C15A36'
                                    }
                                },
                                tooltip: {
                                    formatter: function() {
                                        return 'G (Sol): C大三和弦的五音；<br>G大三和弦(Sol-Si-Re): G-B-D';
                                    }
                                }
                            },
                            {
                                value: 60,
                                itemStyle: {
                                    color: '#000000'
                                },
                                tooltip: {
                                    formatter: 'G♯/A♭'
                                }
                            },
                            {
                                value: 80,
                                itemStyle: {
                                    color: '#FFFFFF',
                                    borderColor: '#000000',
                                    borderWidth: 1
                                },
                                emphasis: {
                                    itemStyle: {
                                        color: '#DCA762'
                                    }
                                },
                                tooltip: {
                                    formatter: function() {
                                        return 'A (La): A小三和弦的根音；<br>A小三和弦(La-Do-Mi): A-C-E';
                                    }
                                }
                            },
                            {
                                value: 60,
                                itemStyle: {
                                    color: '#000000'
                                },
                                tooltip: {
                                    formatter: 'A♯/B♭'
                                }
                            },
                            {
                                value: 80,
                                itemStyle: {
                                    color: '#FFFFFF',
                                    borderColor: '#000000',
                                    borderWidth: 1
                                },
                                emphasis: {
                                    itemStyle: {
                                        color: '#8EA580'
                                    }
                                },
                                tooltip: {
                                    formatter: function() {
                                        return 'B (Si): G大三和弦的三音；<br>B减三和弦(Si-Re-Fa): B-D-F';
                                    }
                                }
                            }
                        ]
                    }
                ]
            };
            keyboardChart.setOption(keyboardOption);

            // 窗口大小变化时重绘图表
            window.addEventListener('resize', function() {
                chordConceptChart.resize();
                chordTypesPie.resize();
                extendedChordsChart.resize();
                inversionsChart.resize();
                chordProgressionChart.resize();
                keyboardChart.resize();
            });

            // 测验交互
            const quizOptions = document.querySelectorAll('.quiz-option');
            const checkButton = document.querySelector('.check-button');
            const explanation = document.querySelector('.explanation');
            const reward = document.querySelector('.reward');
            
            quizOptions.forEach(option => {
                option.addEventListener('click', function() {
                    quizOptions.forEach(opt => opt.classList.remove('selected'));
                    this.classList.add('selected');
                });
            });
            
            checkButton.addEventListener('click', function() {
                const selectedOption = document.querySelector('.quiz-option.selected');
                
                if (!selectedOption) {
                    alert('请选择一个选项！');
                    return;
                }
                
                quizOptions.forEach(option => {
                    if (option.dataset.correct === 'true') {
                        option.classList.add('correct');
                    } else if (option === selectedOption && option.dataset.correct === 'false') {
                        option.classList.add('wrong');
                    }
                });
                
                explanation.style.display = 'block';
                
                if (selectedOption.dataset.correct === 'true') {
                    reward.style.display = 'block';
                }
                
                checkButton.disabled = true;
            });

            // 侧边栏导航激活状态
            const sections = document.querySelectorAll('section[id]');
            const navLinks = document.querySelectorAll('.toc a');

            window.addEventListener('scroll', function() {
                let current = '';

                sections.forEach(section => {
                    const sectionTop = section.offsetTop;
                    const sectionHeight = section.offsetHeight;
                    if (window.pageYOffset >= sectionTop - 100) {
                        current = section.getAttribute('id');
                    }
                });

                navLinks.forEach(link => {
                    link.classList.remove('active');
                    if (link.getAttribute('href').substring(1) === current) {
                        link.classList.add('active');
                    }
                });
            });
        });
    </script>
</body>
</html>